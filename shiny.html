<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>A soft introduction to Shiny</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">TBEP R Training</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="R_Basics.html">
    <span class="fas fa-university"></span>
     
    R Basics
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-wrench"></span>
     
    Data wrangling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Data_Wrangling_1.html">Part 1</a>
    </li>
    <li>
      <a href="Data_Wrangling_2.html">Part 2</a>
    </li>
  </ul>
</li>
<li>
  <a href="Viz_and_Graphics.html">
    <span class="fas fa-chart-line"></span>
     
    Viz and graphics
  </a>
</li>
<li>
  <a href="mapping.html">
    <span class="fas fa-globe-americas"></span>
     
    Spatial analysis and mapping
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data_and_Resources.html">
    <span class="fas fa-list"></span>
     
    Data and resources
  </a>
</li>
<li>
  <a href="https://github.com/tbep-tech/tbep-r-training">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">A soft introduction to Shiny</h1>

</div>


<p>Full disclaimer: Much of this content was pillaged from the <a href="https://mastering-shiny.org/index.html">Mastering Shiny</a> text. Please consult that text for a much more informed description of how to build shiny apps!</p>
<div id="outline" class="section level2">
<h2>Outline</h2>
<ul>
<li><a href="#what-is-and-why-shiny">What is and Why Shiny?</a></li>
<li><a href="#new-concepts">New concepts</a></li>
<li><a href="#a-simple-example">A simple example</a></li>
<li><a href="#a-better-example">A better example</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
</div>
<div id="what-is-and-why-shiny" class="section level2">
<h2>What is and why Shiny?</h2>
<p>Shiny is an R package that lets you create rich, interactive web applications. Shiny lets you take an existing R script and expose it using a web browser so that you or anybody else can use it outside of R. Shiny is commonly used to:</p>
<ul>
<li>Communicate complex workflows to a non-technical audience with informative visualizations and interactive components</li>
<li>Share your analysis easily with colleagues without having to walk them through details of your script</li>
<li>Help inform your understanding of an analysis by creating a user interface to quickly evaluate</li>
</ul>
<p>In the applied sciences world, Shiny can be a very important tool to “bridge the research-management divide”! A very simple example is the use of Shiny to replace a 500 page document with hundreds of figures with a simple application that allows the user to jump to an exact slide of the data that they want.</p>
<p>There are many advantages to using Shiny over other platforms for creating web applications. As R users, the beauty of Shiny is that you only need to know how to use R. You do not need to know anything about web programming, such as HTML, CSS, or JavaScript. On the other hand, Shiny gives you the power to tap into the broader suite of web programming tools when you’re ready to or have a need to expand your application.</p>
<p>More simply, Shiny lets you create a web interface for any R workflow. This means that whatever custom analysis or graphic you’ve made can be fully integrated into your dashboard, unlike other platforms that may have rigid and less customizable templates designed for ease of use.</p>
</div>
<div id="new-concepts" class="section level2">
<h2>New concepts</h2>
<p>Shiny can be challenging at first because it introduces a new way of thinking about your code. “Simple” R scripts are designed to run linearly, being read from top to bottom. You write your script, source the code to your console, and get some results or objects created after running the script.</p>
<p>A shiny app runs from an R script, but instead of executing code linearly, it uses <strong>reactive</strong> programming that detects when an input is changed on the application, runs the minimal amount of code that uses that input, then updates the output as needed. So, rather than thinking of the script as linear, think of it as having interconnected components that share pieces of information to produce the results.</p>
<p>This can be daunting at first because it requires you think about which pieces of your code require inputs from other pieces and how that information is used to create output. Reactivity can be conceptualized by the building blocks of a Shiny app. Every Shiny app has the following:</p>
<ul>
<li><strong>User interface (UI)</strong>: Includes all inputs and outputs, as well as the appearance of the dashboard</li>
<li><strong>Server</strong>: The guts or engine of how the inputs are used to create the outputs, this is where your complicated workflow can live.</li>
</ul>
<p>In practice, this looks like this:</p>
<pre class="r"><code>library(shiny)
ui &lt;- fluidPage()
server &lt;- function(input, output){}
shinyApp(ui = ui, server = server)</code></pre>
<p>For a real Shiny app, this code would live in a standalone script. You launch the dashboard by sourcing the script or hitting the green “Run app” button on the top right.</p>
<p><img src="figure/simpleapp.PNG" width="100%" style="display: block; margin: auto;" /></p>
<p>If you run this code, you’ll see a local web browser pop up. It will be empty because this app does nothing, but this a starting point for creating your application. All we need to do is populate the <code>ui</code> and <code>server</code> objects with code to do some things.</p>
</div>
<div id="a-simple-example" class="section level2">
<h2>A simple example</h2>
<p>Now let’s make our simple example do something. As with most problems, it’s good to start with identifying where you want to go and then working backwards to figure out how to get there. Let’s end with a simple histogram to visualize some data for the normal distribution but with different sample sizes.</p>
<pre class="r"><code>dat &lt;- rnorm(100)
hist(dat)</code></pre>
<p><img src="figure/unnamed-chunk-3-1.png" width="672" /></p>
<p>Changing the sample size:</p>
<pre class="r"><code>dat &lt;- rnorm(10)
hist(dat)</code></pre>
<p><img src="figure/unnamed-chunk-4-1.png" width="672" /></p>
<p>To make a Shiny app out of this, we need to identify our inputs and our outputs. The input in this case is the sample size and the output is the plot. Inputs/outputs go in the <code>ui</code> object and are used by <code>server</code> object. Putting this into our template would look something like this:</p>
<pre class="r"><code>library(shiny)

ui &lt;- fluidPage(
  numericInput(&#39;n&#39;, &#39;Sample size&#39;, value = 50),
  plotOutput(&#39;myplot&#39;)
)

server &lt;- function(input, output){
  output$myplot &lt;- renderPlot({
    dat &lt;- rnorm(input$n)
    hist(dat)
  })
}

shinyApp(ui = ui, server = server)</code></pre>
<p><div style="width: 100% ; height: 400px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div></p>
<p>Okay, so what is happening under the hood when you change the sample size?</p>
<ol style="list-style-type: decimal">
<li>The <code>input</code> value <code>n</code> from the <code>ui</code> is sent to the server, seen as <code>input$n</code>.</li>
<li>The <code>dat</code> object is created as a random sample with size <code>n</code> and then a histogram is created as output for <code>renderPlot</code></li>
<li>The plot output named <code>myplot</code> is appended to the <code>output</code> list of objects</li>
<li>The plot is then rendered on the <code>ui</code> side using <code>plotOutput</code> and referencing the <code>myplot</code> name of the object.</li>
</ol>
<p><img src="figure/simpleappflo.png" width="100%" style="display: block; margin: auto;" /></p>
<p>All of this happens each time the input values are changed, such that the output <strong>reacts</strong> to any change in the input.</p>
<p>There are some general rules and concepts about Shiny reactivity that are shown here that apply to any Shiny application.</p>
<ul>
<li><p>All input objects are defined in the <code>ui</code> file, given a name using the <code>fooInput()</code> function, and then referenced in the <code>server</code> file by <code>input$name</code> (<code>input$n</code> in this case).</p>
<pre class="r"><code>numericInput(&#39;n&#39;, &#39;Sample size&#39;, value = 50)</code></pre></li>
<li><p>All output objects are in the server file by assigning a “rendered” object to the <code>output</code> object by <code>output$name</code> (<code>output$myplot</code> in this case).</p>
<pre class="r"><code>output$myplot &lt;- renderPlot({
  dat &lt;- rnorm(input$n)
  hist(dat)
})</code></pre></li>
<li><p>The <code>ui</code> file controls where and when the output is rendered, typically using a function named <code>fooOutput()</code> that has a complementary reactive function named <code>renderFoo()</code></p>
<pre class="r"><code>plotOutput(&#39;myplot&#39;)</code></pre></li>
<li><p>The <code>ui</code> file can be declared with a function (<code>fluidPage()</code> here as one type of layout) with at least two inputs (one input, one output) separated by commas.</p></li>
<li><p>The <code>server</code> file can be declared with the <code>server()</code> function where the input is evaluated as a standalone group of operations with the curly braces <code>{}</code></p></li>
</ul>
<p>You’re well on your way to understanding Shiny once you master the concepts demonstrated by the simple example above. Once you master the concepts, the rest is just finding the right reactive functions that do you what you need.</p>
<p>An overview of the standard Shiny input options is here: <a href="https://shiny.rstudio.com/gallery/widget-gallery.html" class="uri">https://shiny.rstudio.com/gallery/widget-gallery.html</a></p>
<p>A totally non-exhaustive list of the output functions (remember <code>renderFoo()</code> for <code>server</code>, <code>fooOutput()</code> for <code>ui</code>) that you’ll most commonly use are <code>renderPlot()</code>/<code>plotOutput()</code>, <code>renderTable()</code>/<code>tableOutput()</code>, <code>renderText()</code>/<code>textOutput()</code>, and <code>renderUI()``/uiOutput()</code>.</p>
</div>
<div id="a-better-example" class="section level2">
<h2>A better example</h2>
<p>Last year we talked about using R to <a href="https://tbep-tech.github.io/tbep-r-training/functions.html">write your own functions</a>. We started with a simple example of filtering and plotting data from the FWC <a href="https://geodata.myfwc.com/datasets/68fb6774b58a40a08a6f87959aaa53c4_26/data">Fisheries Independent Monitoring</a> dataset.</p>
</div>
<div id="debugging-r-shiny-apps" class="section level2">
<h2>Debugging R Shiny apps</h2>
<p>Use the browser() but DO NOT run from the knit option.</p>
</div>
<div id="sharing-your-applications" class="section level2">
<h2>Sharing your applications</h2>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li><a href="https://mastering-shiny.org/index.html">Mastering Shiny</a>: By Hadley Wickham, to be published June 2021</li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/shiny.pdf">RStudio Shiny cheatsheet</a></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
